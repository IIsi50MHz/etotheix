<?xml version="1.0"?>
<axsl:stylesheet xmlns:axsl="http://www.w3.org/1999/XSL/Transform" version="1.0"><axsl:output method="html" encoding="ISO-8859-1"/><axsl:template match="@*|node()"><axsl:copy><axsl:apply-templates select="@*|node()"/></axsl:copy></axsl:template><axsl:template match="ul[@id = 'ding'][contains(concat(normalize-space(@class), ' '), 'blah ')]" priority="11011"><div class="wrapper"><h1>before list</h1><axsl:element name="ol"><axsl:apply-templates select="@*"/><axsl:attribute name="title">THIS IS A TITLE</axsl:attribute><axsl:variable name="orig_classes" select="concat(normalize-space(@class), ' ')"/><axsl:variable name="classes"><axsl:value-of select="$orig_classes"/><axsl:if test="not(contains($orig_classes, 'blah '))">blah </axsl:if><axsl:if test="not(contains($orig_classes, 'ding '))">ding </axsl:if><axsl:if test="not(contains($orig_classes, 'hey '))">hey </axsl:if><axsl:if test="not(contains($orig_classes, 'what '))">what </axsl:if></axsl:variable><axsl:variable name="trimmed_classes" select="normalize-space($classes)"/><axsl:if test="$trimmed_classes"><axsl:attribute name="class"><axsl:value-of select="$trimmed_classes"/></axsl:attribute></axsl:if><h2>prepend</h2><div class="innerwrap"><axsl:apply-templates select="node()" mode="id4483411"/></div><h2>append</h2></axsl:element><h1>after list</h1></div></axsl:template><axsl:template match="node()" mode="id4483411"><axsl:apply-templates select="."/></axsl:template><axsl:template match="li" priority="1" mode="id4483411"><axsl:element name="{name()}"><axsl:apply-templates select="@*"/><axsl:attribute name="title">ding</axsl:attribute><axsl:variable name="orig_classes" select="concat(normalize-space(@class), ' ')"/><axsl:variable name="classes"><axsl:value-of select="$orig_classes"/><axsl:if test="not(contains($orig_classes, 'hey '))">hey </axsl:if><axsl:if test="not(contains($orig_classes, 'foo '))">foo </axsl:if><axsl:if test="not(contains($orig_classes, 'hello '))">hello </axsl:if></axsl:variable><axsl:variable name="trimmed_classes" select="normalize-space($classes)"/><axsl:if test="$trimmed_classes"><axsl:attribute name="class"><axsl:value-of select="$trimmed_classes"/></axsl:attribute></axsl:if><h1 style="color:lightblue;"><axsl:apply-templates select="node()"/></h1></axsl:element></axsl:template><axsl:template match="head" priority="1"><axsl:element name="{name()}"><axsl:apply-templates select="@*"/><script>alert('xhello!!!');</script></axsl:element></axsl:template><axsl:template match="processing-instruction('xml-stylesheet')"/></axsl:stylesheet>
